{"version":3,"sources":["../../src/services/pools.service.ts"],"sourcesContent":["import { CreatePoolDto } from '@dtos/pools.dto';\nimport { HttpException } from '@exceptions/HttpException';\nimport { Pool } from '@interfaces/pools.interface';\nimport poolModel from '@models/pools.model';\nimport { isEmpty } from '@utils/util';\n\nclass PoolService {\n  public pools = poolModel;\n\n  public async findAll(): Promise<Pool[]> {\n    const users: Pool[] = await this.pools.find();\n    return users;\n  }\n\n  public async findById(poolId: string): Promise<Pool> {\n    if (isEmpty(poolId)) throw new HttpException(400, \"You're not poolId\");\n\n    const findPool: Pool = await this.pools.findOne({ _id: poolId });\n    if (!findPool) throw new HttpException(409, \"You're not pool\");\n\n    return findPool;\n  }\n\n  public async create(poolData: CreatePoolDto): Promise<Pool> {\n    if (isEmpty(poolData)) throw new HttpException(400, \"You're not poolData\");\n\n    const findPool: Pool = await this.pools.findOne({ name: poolData.name });\n    if (findPool) throw new HttpException(409, `Your pool name(${poolData.name}) already exists`);\n\n    const createPoolData: Pool = await this.pools.create(poolData);\n\n    return createPoolData;\n  }\n\n  public async update(poolId: string, poolData: CreatePoolDto): Promise<Pool> {\n    if (isEmpty(poolData)) throw new HttpException(400, \"You're not poolData\");\n\n    if (poolData.name) {\n      const findPool: Pool = await this.pools.findOne({ name: poolData.name });\n      if (findPool && findPool._id != poolId) throw new HttpException(409, `Your pool name ${poolData.name} already exists`);\n    }\n\n    const updatePoolById: Pool = await this.pools.findByIdAndUpdate(poolId, { poolData });\n    if (!updatePoolById) throw new HttpException(409, \"You're not pool\");\n\n    return updatePoolById;\n  }\n\n  public async delete(poolId: string): Promise<Pool> {\n    const deletePoolById: Pool = await this.pools.findByIdAndDelete(poolId);\n    if (!deletePoolById) throw new HttpException(409, \"You're not pool\");\n\n    return deletePoolById;\n  }\n}\n\nexport default PoolService;\n"],"names":["PoolService","findAll","users","pools","find","findById","poolId","findPool","findOne","_id","create","poolData","name","createPoolData","update","updatePoolById","findByIdAndUpdate","delete","deletePoolById","findByIdAndDelete"],"mappings":";;;;;AAC8B,GAA2B,CAA3B,cAA2B;AAEnC,GAAqB,CAArB,WAAqB;AACnB,GAAa,CAAb,KAAa;;;;;;AAErC,GAAK,CAACA,WAAW,SAAXA,WAAW;UAGFC,OAAO,GAAoB,CAAC;QACvC,KAAK,CAACC,KAAK,GAAW,KAAK,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI;QAC3C,MAAM,CAACF,KAAK;IACd,CAAC;UAEYG,QAAQ,CAACC,MAAc,EAAiB,CAAC;QACpD,EAAE,MAXkB,KAAa,UAWrBA,MAAM,GAAG,KAAK,CAAC,GAAG,CAdJ,cAA2B,eAcR,GAAG,EAAE,CAAmB;QAErE,KAAK,CAACC,QAAQ,GAAS,KAAK,CAAC,IAAI,CAACJ,KAAK,CAACK,OAAO,CAAC,CAAC;YAACC,GAAG,EAAEH,MAAM;QAAC,CAAC;QAC/D,EAAE,GAAGC,QAAQ,EAAE,KAAK,CAAC,GAAG,CAjBE,cAA2B,eAiBd,GAAG,EAAE,CAAiB;QAE7D,MAAM,CAACA,QAAQ;IACjB,CAAC;UAEYG,MAAM,CAACC,QAAuB,EAAiB,CAAC;QAC3D,EAAE,MApBkB,KAAa,UAoBrBA,QAAQ,GAAG,KAAK,CAAC,GAAG,CAvBN,cAA2B,eAuBN,GAAG,EAAE,CAAqB;QAEzE,KAAK,CAACJ,QAAQ,GAAS,KAAK,CAAC,IAAI,CAACJ,KAAK,CAACK,OAAO,CAAC,CAAC;YAACI,IAAI,EAAED,QAAQ,CAACC,IAAI;QAAC,CAAC;QACvE,EAAE,EAAEL,QAAQ,EAAE,KAAK,CAAC,GAAG,CA1BG,cAA2B,eA0Bf,GAAG,GAAG,eAAe,EAAEI,QAAQ,CAACC,IAAI,CAAC,gBAAgB;QAE3F,KAAK,CAACC,cAAc,GAAS,KAAK,CAAC,IAAI,CAACV,KAAK,CAACO,MAAM,CAACC,QAAQ;QAE7D,MAAM,CAACE,cAAc;IACvB,CAAC;UAEYC,MAAM,CAACR,MAAc,EAAEK,QAAuB,EAAiB,CAAC;QAC3E,EAAE,MA/BkB,KAAa,UA+BrBA,QAAQ,GAAG,KAAK,CAAC,GAAG,CAlCN,cAA2B,eAkCN,GAAG,EAAE,CAAqB;QAEzE,EAAE,EAAEA,QAAQ,CAACC,IAAI,EAAE,CAAC;YAClB,KAAK,CAACL,QAAQ,GAAS,KAAK,CAAC,IAAI,CAACJ,KAAK,CAACK,OAAO,CAAC,CAAC;gBAACI,IAAI,EAAED,QAAQ,CAACC,IAAI;YAAC,CAAC;YACvE,EAAE,EAAEL,QAAQ,IAAIA,QAAQ,CAACE,GAAG,IAAIH,MAAM,EAAE,KAAK,CAAC,GAAG,CAtCzB,cAA2B,eAsCa,GAAG,GAAG,eAAe,EAAEK,QAAQ,CAACC,IAAI,CAAC,eAAe;QACtH,CAAC;QAED,KAAK,CAACG,cAAc,GAAS,KAAK,CAAC,IAAI,CAACZ,KAAK,CAACa,iBAAiB,CAACV,MAAM,EAAE,CAAC;YAACK,QAAQ;QAAC,CAAC;QACpF,EAAE,GAAGI,cAAc,EAAE,KAAK,CAAC,GAAG,CA1CJ,cAA2B,eA0CR,GAAG,EAAE,CAAiB;QAEnE,MAAM,CAACA,cAAc;IACvB,CAAC;UAEYE,MAAM,CAACX,MAAc,EAAiB,CAAC;QAClD,KAAK,CAACY,cAAc,GAAS,KAAK,CAAC,IAAI,CAACf,KAAK,CAACgB,iBAAiB,CAACb,MAAM;QACtE,EAAE,GAAGY,cAAc,EAAE,KAAK,CAAC,GAAG,CAjDJ,cAA2B,eAiDR,GAAG,EAAE,CAAiB;QAEnE,MAAM,CAACA,cAAc;IACvB,CAAC;;QA/CH,IAgDC,CA/CQf,KAAK,GAJQ,WAAqB;;;eAqD5BH,WAAW"}