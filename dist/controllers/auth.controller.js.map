{"version":3,"sources":["../../src/controllers/auth.controller.ts"],"sourcesContent":["import { NextFunction, Request, Response } from 'express';\nimport { CreateUserDto } from '@dtos/users.dto';\nimport { RequestWithUser } from '@interfaces/auth.interface';\nimport { User } from '@interfaces/users.interface';\nimport AuthService from '@services/auth.service';\n\nclass AuthController {\n  public authService = new AuthService();\n\n  public signUp = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const userData: CreateUserDto = req.body;\n      const signUpUserData: User = await this.authService.signup(userData);\n\n      res.status(201).json({ data: signUpUserData, message: 'signup' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public logIn = async (req: Request, res: Response, next: NextFunction) => {\n    try {\n      const userData: CreateUserDto = req.body;\n      const { cookie, findUser } = await this.authService.login(userData);\n\n      res.setHeader('Set-Cookie', [cookie]);\n      res.status(200).json({ data: findUser, message: 'login' });\n    } catch (error) {\n      next(error);\n    }\n  };\n\n  public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\n    try {\n      const userData: User = req.user;\n      const logOutUserData: User = await this.authService.logout(userData);\n\n      res.setHeader('Set-Cookie', ['Authorization=; Max-age=0']);\n      res.status(200).json({ data: logOutUserData, message: 'logout' });\n    } catch (error) {\n      next(error);\n    }\n  };\n}\n\nexport default AuthController;\n"],"names":["AuthController","authService","signUp","req","res","next","userData","body","signUpUserData","signup","status","json","data","message","error","logIn","cookie","findUser","login","setHeader","logOut","user","logOutUserData","logout"],"mappings":";;;;;AAIwB,GAAwB,CAAxB,YAAwB;;;;;;AAEhD,GAAK,CAACA,cAAc,SAAdA,cAAc;;QAApB,IAqCC,CApCQC,WAAW,GAAG,GAAG,CAHF,YAAwB;QAEhD,IAqCC,CAlCQC,MAAM,UAAUC,GAAY,EAAEC,GAAa,EAAEC,IAAkB,GAAK,CAAC;YAC1E,GAAG,CAAC,CAAC;gBACH,KAAK,CAACC,QAAQ,GAAkBH,GAAG,CAACI,IAAI;gBACxC,KAAK,CAACC,cAAc,GAAS,KAAK,CAAC,IAAI,CAACP,WAAW,CAACQ,MAAM,CAACH,QAAQ;gBAEnEF,GAAG,CAACM,MAAM,CAAC,GAAG,EAAEC,IAAI,CAAC,CAAC;oBAACC,IAAI,EAAEJ,cAAc;oBAAEK,OAAO,EAAE,CAAQ;gBAAC,CAAC;YAClE,CAAC,CAAC,KAAK,EAAEC,KAAK,EAAE,CAAC;gBACfT,IAAI,CAACS,KAAK;YACZ,CAAC;QACH,CAAC;QAZH,IAqCC,CAvBQC,KAAK,UAAUZ,GAAY,EAAEC,GAAa,EAAEC,IAAkB,GAAK,CAAC;YACzE,GAAG,CAAC,CAAC;gBACH,KAAK,CAACC,QAAQ,GAAkBH,GAAG,CAACI,IAAI;gBACxC,KAAK,CAAC,CAAC,CAACS,MAAM,GAAEC,QAAQ,EAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAChB,WAAW,CAACiB,KAAK,CAACZ,QAAQ;gBAElEF,GAAG,CAACe,SAAS,CAAC,CAAY,aAAE,CAACH;oBAAAA,MAAM;gBAAA,CAAC;gBACpCZ,GAAG,CAACM,MAAM,CAAC,GAAG,EAAEC,IAAI,CAAC,CAAC;oBAACC,IAAI,EAAEK,QAAQ;oBAAEJ,OAAO,EAAE,CAAO;gBAAC,CAAC;YAC3D,CAAC,CAAC,KAAK,EAAEC,KAAK,EAAE,CAAC;gBACfT,IAAI,CAACS,KAAK;YACZ,CAAC;QACH,CAAC;QAxBH,IAqCC,CAXQM,MAAM,UAAUjB,GAAoB,EAAEC,GAAa,EAAEC,IAAkB,GAAK,CAAC;YAClF,GAAG,CAAC,CAAC;gBACH,KAAK,CAACC,QAAQ,GAASH,GAAG,CAACkB,IAAI;gBAC/B,KAAK,CAACC,cAAc,GAAS,KAAK,CAAC,IAAI,CAACrB,WAAW,CAACsB,MAAM,CAACjB,QAAQ;gBAEnEF,GAAG,CAACe,SAAS,CAAC,CAAY,aAAE,CAAC;oBAAA,CAA2B;gBAAA,CAAC;gBACzDf,GAAG,CAACM,MAAM,CAAC,GAAG,EAAEC,IAAI,CAAC,CAAC;oBAACC,IAAI,EAAEU,cAAc;oBAAET,OAAO,EAAE,CAAQ;gBAAC,CAAC;YAClE,CAAC,CAAC,KAAK,EAAEC,KAAK,EAAE,CAAC;gBACfT,IAAI,CAACS,KAAK;YACZ,CAAC;QACH,CAAC;;;eAGYd,cAAc"}